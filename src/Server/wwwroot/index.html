<html>

<head>
  <title>Password Generator</title>
  <meta content='width=device-width, initial-scale=1' name='viewport' />
  <meta name="description" content="Secure password generator">
  <meta name="keywords" content="password, generator, security, strong passwords, password strength">
  <script>
    window.onload = function () {
      var hostname = window.location.hostname.split('.').slice(-2).join('.');
      var hostnameparts = hostname.split('.');

      if (hostnameparts.length == 1) {
        hostname = hostnameparts[0].toLowerCase();
      } else if (hostnameparts.length == 2) {
        hostname = hostnameparts[0].toLowerCase() + "." + hostnameparts[1].toUpperCase();
      }

      document.getElementById("host").innerHTML = hostname;
    };
  </script>
  <script>
    const default_options = {
      plength: 12,
      includeLowercase: true,
      includeUppercase: true,
      includeNumeric: true,
      includeSpecial: true,
      includeAmbiguous: false,
      characterProfile: 'conservative',
      colorCoded: true,
    };

    function generatePassword(length, options) {
      const {
        includeLowercase = true,
        includeUppercase = true,
        includeNumeric = true,
        includeSpecial = true,
        includeAmbiguous = false,
        characterProfile = 'conservative',
        plength = 12
      } = options;

      const characterProfiles = {
        conservative: {
          lowercase: 'abcdefghijklmnopqrstuvwxyz',
          uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
          numeric: '0123456789',
          special: '!@$*()_-',
          similar: 'iIlL1O0',
          unambiguous: 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789',
        },
        standard: {
          lowercase: 'abcdefghijklmnopqrstuvwxyz',
          uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
          numeric: '0123456789',
          special: '!@$*()_-[]{},.?',
          similar: 'iIlL1O0',
          unambiguous: 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789',
        },
        full: {
          lowercase: 'abcdefghijklmnopqrstuvwxyz',
          uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
          numeric: '0123456789',
          special: '!@$^*()_-[]{}|<>,.?/~`',
          similar: 'iIlL1O0',
          unambiguous: 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789',
        }
      };

      const characters = characterProfiles[characterProfile] || characterProfiles.conservative;

      let validCharacters = [
        ...(includeLowercase ? characters.lowercase : ''),
        ...(includeUppercase ? characters.uppercase : ''),
        ...(includeNumeric ? characters.numeric : ''),
      ].join('');

      if (!includeAmbiguous) {
        validCharacters = [...validCharacters].filter(c => !characters.similar.includes(c)).join('');
      }

      if (validCharacters.length === 0) {
        throw new Error('At least one character type must be included in the password');
      }

      let password = '';
      let min_special_count = Math.ceil(1, Math.floor(length * 0.1));
      let max_special_count = Math.floor(length * 0.2);
      let special_count = 0;
      while (password.length < length) {
        while (password.length < length) {
          if ((includeSpecial && Math.random() < 0.1) && special_count < max_special_count) {
            password += characters.special[Math.floor(Math.random() * characters.special.length)];
            special_count++;
          } else {
            password += validCharacters[Math.floor(Math.random() * validCharacters.length)];
          }
        }

        if (includeSpecial) {
          // If there are less than min_special_count special characters, add some randomly.
          if (special_count < min_special_count) {
            while (special_count < min_special_count) {
              let index = Math.floor(Math.random() * password.length);
              password = password.slice(0, index) + characters.special[Math.floor(Math.random() * characters.special.length)] + password.slice(index);
              special_count++;
            }
          }
        }

        // Remove random characters if it's too long
        while (password.length > length) {
          let index = Math.floor(Math.random() * password.length);
          password = password.slice(0, index) + password.slice(index + 1);
        }
      }

      return password;
    }

    function displayPassword(password, colorCoded) {
      const passwordElement = document.getElementById('password');
      
      if (colorCoded) {
        // Define all possible special characters from all profiles combined
        const allSpecialChars = '!@$^*()_-[]{}|<>,.?/~`';
        
        // Create colored HTML version
        const coloredHtml = password
          .split('')
          .map(char => {
            if (/\d/.test(char)) {
              return `<span class="password-number">${char}</span>`;
            } else if (allSpecialChars.includes(char)) {
              return `<span class="password-special">${char}</span>`;
            }
            return char;
          })
          .join('');
        passwordElement.innerHTML = coloredHtml;
      } else {
        // Display as plain text
        passwordElement.textContent = password;
      }
      
      // Store the plain text password for copying
      passwordElement.dataset.password = password;
    }
    function save_options(options) {
      var storage = {};
      // options is an object with name/value pairs
      for (var key in options) {
        storage[key] = options[key]
      }

      localStorage.setItem('options', JSON.stringify(storage));
    }
    function load_options() {
      var local_storage_options = localStorage.getItem('options');

      if (local_storage_options) {
        var options = JSON.parse(local_storage_options);
        return options
      }

      return null;
    }
    function reset_form() {
      // reset the form to default_options
      var form = document.getElementById('generate-password-form');
      for (var key in default_options) {
        var element = form.elements[key];
        if (element) {
          if (element instanceof HTMLInputElement && element.type == 'checkbox') {
            element.checked = default_options[key] == true;
          } else {
            element.value = default_options[key];
          }
        }
      }
    }
    function copyPassword() {
      const passwordElement = document.getElementById('password');
      const password = passwordElement.dataset.password || passwordElement.textContent;
      
      // Create a temporary textarea to copy the plain text password
      const tempTextarea = document.createElement('textarea');
      tempTextarea.value = password;
      document.body.appendChild(tempTextarea);
      tempTextarea.select();
      document.execCommand('copy');
      document.body.removeChild(tempTextarea);
    }

    function adjustTooltipPosition() {
      const tooltips = document.querySelectorAll('.tooltip');
      
      tooltips.forEach(tooltip => {
        const tooltipText = tooltip.querySelector('.tooltiptext');
        if (!tooltipText) return;

        // Reset classes
        tooltipText.classList.remove('tooltip-left', 'tooltip-right', 'tooltip-center');
        
        // Get tooltip trigger position
        const triggerRect = tooltip.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const margin = 20; // Minimum margin from edges
        
        // Calculate dynamic tooltip width for smaller screens
        let tooltipWidth = 250; // Default tooltip width
        const maxWidth = viewportWidth - (margin * 2);
        if (tooltipWidth > maxWidth) {
          tooltipWidth = maxWidth;
          tooltipText.style.width = tooltipWidth + 'px';
        } else {
          tooltipText.style.width = '250px'; // Reset to default
        }
        
        // Calculate positions
        const triggerCenter = triggerRect.left + (triggerRect.width / 2);
        const tooltipLeft = triggerCenter - (tooltipWidth / 2);
        const tooltipRight = triggerCenter + (tooltipWidth / 2);
        
        // Determine positioning
        if (tooltipLeft < margin) {
          // Too close to left edge - align tooltip to left
          tooltipText.classList.add('tooltip-left');
        } else if (tooltipRight > (viewportWidth - margin)) {
          // Too close to right edge - align tooltip to right
          tooltipText.classList.add('tooltip-right');
        } else {
          // Enough space - center the tooltip
          tooltipText.classList.add('tooltip-center');
          // Update margin for dynamic width
          if (tooltipWidth !== 250) {
            tooltipText.style.marginLeft = '-' + (tooltipWidth / 2) + 'px';
          }
        }
      });
    }
  </script>
  <script>
    window.onload = function () {
      const form = document.getElementById('generate-password-form');

      let options = load_options();
      if (options) {
        console.log(options)
        for (var key in options) {
          var element = form.elements[key];
          if (element) {
            if (element instanceof HTMLInputElement && element.type == 'checkbox') {
              element.checked = options[key] == true;
            } else {
              element.value = options[key];
            }
          }
        }
      }

      const passwordInput = document.getElementById('password');

      form.addEventListener('submit', event => {
        event.preventDefault();

        const length = Number(form.elements.plength.value);
        let options = {
          plength: form.elements.plength.value,
          includeLowercase: form.elements.includeLowercase.checked,
          includeUppercase: form.elements.includeUppercase.checked,
          includeNumeric: form.elements.includeNumeric.checked,
          includeSpecial: form.elements.includeSpecial.checked,
          includeAmbiguous: form.elements.includeAmbiguous.checked,
          characterProfile: form.elements.characterProfile.value,
          colorCoded: form.elements.colorCoded.checked,
        };

        const password = generatePassword(length, options);
        displayPassword(password, options.colorCoded);
        save_options(options);
      });

      form.addEventListener('reset', event => {
        event.preventDefault();
        reset_form();
      });

      form.elements.copypassword.addEventListener('click', event => {
        event.preventDefault();
        copyPassword();
      });

      // Add event listener for colorCoded checkbox to re-render password
      form.elements.colorCoded.addEventListener('change', event => {
        const passwordElement = document.getElementById('password');
        const currentPassword = passwordElement.dataset.password || passwordElement.textContent;
        if (currentPassword) {
          displayPassword(currentPassword, event.target.checked);
        }
      });

      // Generate a password
      form.dispatchEvent(new Event('submit', { cancelable: true }));
      
      // Initialize tooltip positioning
      adjustTooltipPosition();
      
      // Update tooltip positioning on window resize
      window.addEventListener('resize', adjustTooltipPosition);
    };
  </script>
  <style>
    .form-control {
      display: block;
      width: 100%;
      height: calc(1.5em + .75rem + 2px);
      padding: .375rem .75rem;
      font-size: 1rem;
      font-weight: 400;
      line-height: 1.5;
      color: #495057;
      background-color: #fff;
      background-clip: padding-box;
      border: 1px solid #ced4da;
      border-radius: .25rem;
      transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    .form-control:focus {
      color: #495057;
      background-color: #fff;
      border-color: #80bdff;
      outline: 0;
      box-shadow: 0 0 0 .2rem rgba(0, 123, 255, .25);
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-check {
      position: relative;
      display: block;
      padding-left: 1.25rem;
    }

    .form-check-input {
      position: absolute;
      margin-top: .3rem;
      margin-left: -1.25rem;
    }

    .form-check-label {
      margin-bottom: 0;
    }

    .btn {
      display: inline-block;
      font-weight: 400;
      text-align: center;
      white-space: nowrap;
      vertical-align: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      border: 1px solid transparent;
      padding: .375rem .75rem;
      font-size: 1rem;
      line-height: 1.5;
      border-radius: .25rem;
      transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    .btn-primary {
      color: #fff;
      background-color: #007bff;
      border-color: #007bff;
    }

    .btn-primary:hover {
      color: #fff;
      background-color: #0069d9;
      border-color: #0062cc;
    }

    .btn-secondary {
      color: #fff;
      background-color: #6c757d;
      border-color: #6c757d;
    }

    .btn-secondary:hover {
      color: #fff;
      background-color: #5a6268;
      border-color: #545b62;
    }

    body {
      font-family: 'Roboto', sans-serif;
      font-size: 1rem;
    }

    #copypassword {
      display: flex;
      align-items: center;
    }

    #copypassword .password-input__icon {
      margin-right: 10px;
    }

    .tooltip {
      position: relative;
      display: inline-block;
      margin-left: 5px;
      cursor: help;
      vertical-align: baseline;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 250px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 8px;
      position: absolute;
      z-index: 1000;
      bottom: 125%;
      left: 50%;
      margin-left: -125px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.9em;
      line-height: 1.3;
      /* Keep tooltips within viewport bounds */
      max-width: calc(100vw - 20px);
      word-wrap: break-word;
      /* Ensure minimum margins from viewport edges */
      min-width: 200px;
    }

    /* Adjust tooltip position when it would go outside the viewport */
    .tooltip .tooltiptext::before {
      content: "";
      position: absolute;
      bottom: -5px;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #333 transparent transparent transparent;
    }

    /* Dynamic positioning classes added by JavaScript */
    .tooltip .tooltiptext.tooltip-left {
      left: 0;
      margin-left: 0;
    }

    .tooltip .tooltiptext.tooltip-right {
      right: 0;
      left: auto;
      margin-left: 0;
    }

    .tooltip .tooltiptext.tooltip-center {
      left: 50%;
      margin-left: -125px;
    }

    /* Adjust arrow position for left-aligned tooltips */
    .tooltip .tooltiptext.tooltip-left::before {
      left: 25px;
      margin-left: 0;
    }

    /* Adjust arrow position for right-aligned tooltips */
    .tooltip .tooltiptext.tooltip-right::before {
      left: auto;
      right: 25px;
      margin-left: 0;
    }

    /* Center arrow for center-aligned tooltips */
    .tooltip .tooltiptext.tooltip-center::before {
      left: 50%;
      margin-left: -5px;
    }

    .tooltip .tooltiptext::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #333 transparent transparent transparent;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .tooltip-icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      background-color: #007bff;
      border-radius: 50%;
      color: white;
      text-align: center;
      line-height: 16px;
      font-size: 12px;
      font-weight: bold;
      vertical-align: baseline;
      margin-top: -2px;
    }

    .password-display {
      font-family: 'Courier New', 'Monaco', monospace;
      letter-spacing: 1px;
      word-break: break-all;
      white-space: pre-wrap;
      user-select: all;
      -webkit-user-select: all;
      -moz-user-select: all;
      -ms-user-select: all;
      min-height: calc(1.5em + .75rem + 2px);
      height: auto;
      overflow-wrap: break-word;
    }

    .password-number {
      color: #dc3545;
      font-weight: 500;
    }

    .password-special {
      color: #5bc0de;
      font-weight: 500;
    }
  </style>
</head>

<body style="padding: 0px; margin:0px; background-color: #171026;">
  <div id="main" style="padding: 1px 20px 20px 20px; background-color: white">
    <h1 style="margin-bottom: 6px;"><span id="host" style="color: #0c5fac"></span> &nbsp;<i
        style="color: #3f3f3f; font-size: smaller">password generator</i></h1>
    <i style="color: #a3b5c5">&nbsp;&nbsp;No Ads, No Third Party Trackers, No BS</i>
    <br />
    <br />
    <div>
      <div class="container">
        <form id="generate-password-form" class="form">
          <div class="form-group">
            <label for="plength">Length:
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">The number of characters in the generated password. Longer passwords are more secure.</span>
              </span>
            </label>
            <input type="number" id="plength" name="plength" value="12" min="1" max="100" required class="form-control">
          </div>
          <div class="form-group">
            <label for="characterProfile">Character Set:
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Conservative: Safe characters that work on most websites.

Standard: Includes brackets and punctuation.

Full: All special characters including symbols that some sites may not accept.</span>
              </span>
            </label>
            <select id="characterProfile" name="characterProfile" class="form-control">
              <option value="conservative">Conservative (safe for most websites)</option>
              <option value="standard">Standard (includes brackets and punctuation)</option>
              <option value="full">Full (all special characters)</option>
            </select>
          </div>
          <div class="form-group form-check">
            <input type="checkbox" name="includeLowercase" checked class="form-check-input">
            <label class="form-check-label">Lowercase letters
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Include lowercase letters (a-z) in the password.</span>
              </span>
            </label>
          </div>
          <div class="form-group form-check">
            <input type="checkbox" name="includeUppercase" checked class="form-check-input">
            <label class="form-check-label">Uppercase letters
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Include uppercase letters (A-Z) in the password.</span>
              </span>
            </label>
          </div>
          <div class="form-group form-check">
            <input type="checkbox" name="includeNumeric" checked class="form-check-input">
            <label class="form-check-label">Numbers
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Include numeric digits (0-9) in the password.</span>
              </span>
            </label>
          </div>
          <div class="form-group form-check">
            <input type="checkbox" name="includeSpecial" checked class="form-check-input">
            <label class="form-check-label">Special characters
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Include special characters like !@#$%^&* based on the selected character set.</span>
              </span>
            </label>
          </div>
          <div class="form-group form-check">
            <input type="checkbox" name="includeAmbiguous" class="form-check-input">
            <label class="form-check-label">Include ambiguous characters
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Include characters that look similar and can be confused when typing, like lowercase 'i', uppercase 'I', lowercase 'l', uppercase 'L', the number '1', zero '0', and uppercase 'O'.</span>
              </span>
            </label>
          </div>
          <div class="form-group form-check">
            <input type="checkbox" name="colorCoded" checked class="form-check-input">
            <label class="form-check-label">Color-coded characters
              <span class="tooltip">
                <div class="tooltip-icon">?</div>
                <span class="tooltiptext">Display numbers in red and special characters in light blue to distinguish them from letters in the generated password.</span>
              </span>
            </label>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary">Generate password</button>
            <button type="reset" class="btn btn-secondary">Reset</button>
          </div>
          <div id="password-container" class="form-group">
            <label for="password">Password:</label>
            <div id="password" class="form-control password-display" readonly tabindex="0"></div>
          </div>
          <div class="form-group">
            <button type="button" id="copypassword" class="btn btn-primary">
              <svg class="password-input__icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
              </svg>
              Copy password&nbsp;
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <hr style="margin: 0px;border: 1px solid #276fd7;" />
  <div id="footer" style="padding: 20px; margin: 0px;">
    <div
      style="font-size: small;border: 6px solid #d74a4a;border-radius: 3px;background-color: #dfdaff;padding: 0px 20px;max-width: 500px; margin-top: 4px;">
      <a id="supportlink" href="#supportlink"><p style="font-size:large; font-weight: bold; color: #0c5fac">Help Support this Project</p></a>
      <p>Hi there! I'm glad you're interested in this project.</p>
      <p>I host this site at a loss and use no tracking or ads.</p>
      <p>I believe we all deserve quality software that doesn't focus on investors, corporations and the bottom
        dollar...just a good solid user experience.</p>
      <p>You can support this site by donating through the following platforms:</p>
      <ul>
        <li>
          <a href="https://www.paypal.com/donate/?hosted_button_id=GJP29NBGZ33B4" style="color: #0c5fac"
            target="_blank">PayPal</a>
        </li>
        <li>
          <a href="https://github.com/sponsors/kellyelton" style="color: #0c5fac" target="_blank">Sponsor on GitHub</a>
        </li>
      </ul>
      <p>Thank you so much for using this site and all of your support! My family and I appreciate it greatly!</p>
    </div>
  </div>
</body>

</html>